---
description: 構造化された質問で計画の曖昧性を明確化する
---

# 計画の曖昧性を明確化

計画ファイルを読み込み、製品仕様、技術詳細、UI/UX、その他の関連トピックについて、AskUserQuestionツールを使用して詳細なインタビューを実施します。

## 使用可能なツール
- Write, Edit, Read, Grep, Glob
- TodoRead, TodoWrite
- AskUserQuestion

## 4つのフェーズアプローチ

### フェーズ1: 不明点の明確化
計画ファイルやプロジェクトコンテキストを分析し、曖昧な点を洗い出します。

### フェーズ2: 質問の生成
- **質問数**: 曖昧性のレベルに応じて2〜4問
- **各質問の選択肢**: 2〜4個の具体的なオプション
- **オプションの構成**: 各選択肢に簡潔な長所・短所の分析を含める
- **質問形式**: オープンエンドな質問は避ける
- **"その他"オプション**: 自動的に追加される

**重要**: 必ずAskUserQuestionツールを使用すること（会話形式ではなく）

### フェーズ3: 回答後の処理
以下の形式で出力:

#### Decisions（決定事項）テーブル
| Item | Choice | Reason | Notes |
|------|--------|--------|-------|
| 項目名 | 選択内容 | 選択理由 | 補足事項 |

#### Next Steps（次のステップ）
1. タスク1 - 詳細
2. タスク2 - 詳細
3. ...

### フェーズ4: サマリー表示
すべての曖昧性が解消されるまで、このプロセスを反復的に継続します。

## 重要な注意事項

### 言語設定
- **CLAUDE.mdを必ず確認**: 質問を生成する前にCLAUDE.mdを読み込み、言語設定を確認すること
- **デフォルト**: 英語（CLAUDE.mdで指定がない場合）
- **プロジェクトパターンに合わせる**: CLAUDE.mdに記載されたプロジェクトの命名規則やパターンに従うこと

### 質問設計のルール
- 各オプションには必ず長所・短所を含める
- multiSelectは控えめに使用する（本当に複数選択が必要な場合のみ）
- 質問は具体的で、実装に直結する内容にする
- 技術的な詳細と実現可能性を考慮する

## 実行例

**曖昧な計画**: "ユーザー認証を追加する"

**生成される質問例**:
1. 認証方式は？
   - JWT: 軽量、ステートレス / サーバー側で無効化不可
   - Session: サーバー制御可能 / スケーラビリティに課題
   - OAuth2: 外部連携可能 / 実装複雑

2. トークン保存先は？
   - LocalStorage: アクセス容易 / XSS脆弱性
   - Cookie (HttpOnly): XSS保護 / CSRF対策必要
