---
name: quiz-output-formatter
description: |
  復習問題を美しいMarkdown/HTML形式に整形します。
  生成された復習問題に対して、目次の自動生成、問題の分類・並べ替え、
  解答キーの生成、スタイルの統一化を行い、
  プロフェッショナルなドキュメントに変換します。
allowed-tools:
  - Read
  - Write
  - Bash
  - Grep
---

# 復習問題フォーマッター

復習問題を統一されたMarkdown/HTML形式に整形し、プロフェッショナルなドキュメントに変換するスキルです。

## 機能

### 1. Markdown形式への統一的整形
- 問題タイトル・難易度・分野の統一フォーマット
- 選択肢のインデント・番号付けの統一
- 解説セクションのスタイル統一
- コードブロックの言語指定

### 2. 目次（TOC）自動生成
```markdown
## 📋 目次

- [言語・型システム](#言語型システム)（X問）
- [Web フレームワーク](#webフレームワーク)（X問）
- [クラウド・インフラ](#クラウドインフラ)（X問）
- [開発プロセス](#開発プロセス)（X問）
```

### 3. 問題の分類・並べ替え
- **分野別グループ化**
  - 言語・型システム
  - Web フレームワーク
  - クラウド・インフラ
  - データベース・API
  - 開発プロセス
  - その他

- **難易度順ソート**
  - 各分野内で初級 → 中級 → 上級の順序

### 4. 解答キーの自動生成
```markdown
## ✅ 解答キー

| 問題番号 | 分野 | 難易度 | 解答 |
|---------|------|--------|------|
| 1 | TypeScript | ⭐⭐ | C |
| 2 | Express | ⭐⭐ | B |
| ... | ... | ... | ... |
```

### 5. 統計情報の追加
```markdown
## 📊 このセットの統計

- **総問題数:** 12問
- **平均難易度:** ⭐⭐
- **分野数:** 5分野
- **分野別問題数:**
  - 言語・型システム: 3問
  - Web フレームワーク: 2問
  - クラウド・インフラ: 3問
  - 開発プロセス: 2問
  - その他: 2問
```

### 6. HTML形式への変換（オプション）
- 見出し・リストの HTML タグ化
- CSS スタイルの適用
- Print-friendly レイアウト

## 使用方法

### 基本的な使い方

```bash
# quiz-output-formatter スキルを使用してフォーマットします
「quiz-output-formatter スキルで、以下の復習問題をMarkdown形式に整形してください」

# 入力ファイルを指定
<raw-quiz-content>
...（エージェントが生成した復習問題）...
</raw-quiz-content>
```

### 入力形式
- raw な Markdown（問題セット）
- 一部構造化されていないテキスト
- 複数の問題ブロック

### 出力形式
```
output/quiz-2025-11-18.md
├── ヘッダー（タイトル・日時・対象期間）
├── 目次
├── 概要・使用方法
├── 問題（分野別グループ化・難易度順）
├── 統計情報
├── 解答キー（表形式）
└── 付録（トピック一覧など）
```

## フォーマット例

### 出力ファイル例（output/quiz-2025-11-18.md）

```markdown
# 復習問題集 - 2025年11月18日

**生成日時:** 2025-11-18 10:30:45 UTC
**対象期間:** 2025-10-19 ～ 2025-11-18（過去30日間）
**問題数:** 12問
**作成方法:** Claude Code 履歴自動分析

---

## 📚 このドキュメントについて

このドキュメントは、過去30日間の Claude Code での学習内容から自動生成された復習問題です。

### 使い方

1. **目次から分野を選ぶ** - 興味のある分野の問題から開始
2. **各問題に取り組む** - 回答を書き出して確認
3. **解説を読む** - わからなかった部分を理解
4. **解答キーで確認** - 全問題の正答を確認
5. **繰り返す** - 定期的に同じセットに取り組み、成長を確認

---

## 📋 目次

1. [言語・型システム](#言語型システム)（3問）
2. [Web フレームワーク](#webフレームワーク)（2問）
3. [クラウド・インフラ](#クラウドインフラ)（3問）
4. [開発プロセス](#開発プロセス)（2問）
5. [その他](#その他)（2問）

[全問題解答キー](#解答キー) | [統計情報](#統計情報)

---

## 言語・型システム

### 問題 1: TypeScript の Union 型

**難易度:** ⭐⭐ | **分野:** TypeScript | **出典:** 2025-11-10

以下のコードで、`value` パラメータの型として最も適切なのはどれか？

```typescript
function processValue(value: ???) {
  if (typeof value === 'string') {
    console.log(value.toUpperCase());
  } else if (typeof value === 'number') {
    console.log(value.toFixed(2));
  }
}

processValue('hello');
processValue(42);
```

A) `string | number`
B) `any`
C) `string & number`
D) `unknown`

**正解:** A) `string | number`

**解説:**

この関数は `string` または `number` を受け取る必要があります。TypeScript では Union 型（`|`）を使ってこれを表現します。

- **A) `string | number`** ← 正解。Union 型で複数の型を許可
- **B) `any`** - 型チェックを回避するため、使用は避けるべき
- **C) `string & number`** - Intersection 型。両方の型を満たす値は存在しない
- **D) `unknown`** - 型が未知の場合。その後型ガード（`typeof`）が必要になる

**学習ポイント:**
- Union 型（`|`）: 複数の型のいずれかを受け入れる
- Intersection 型（`&`）: 複数の型を同時に満たす必要がある
- `unknown` vs `any`: どちらも任意の値を許可するが、`unknown` は型チェックを強制する

---

[問題数が多い場合は省略...]

---

## ✅ 解答キー

| # | 分野 | 難易度 | 解答 | タイトル |
|---|------|--------|------|---------|
| 1 | TypeScript | ⭐⭐ | A | Union 型 |
| 2 | TypeScript | ⭐⭐⭐ | B | ジェネリクスの制約 |
| 3 | Express | ⭐⭐ | C | ミドルウェアの実行順序 |
| 4 | Express | ⭐ | A | HTTP ステータスコード |
| 5 | AWS | ⭐⭐ | B | Lambda の環境変数 |
| ... | ... | ... | ... | ... |

---

## 📊 統計情報

**問題構成:**
- 総問題数: 12問
- 平均難易度: ⭐⭐

**分野別:**
| 分野 | 問題数 | 割合 |
|------|-------|------|
| 言語・型システム | 3 | 25% |
| Web フレームワーク | 2 | 17% |
| クラウド・インフラ | 3 | 25% |
| 開発プロセス | 2 | 17% |
| その他 | 2 | 17% |

**難易度別:**
| 難易度 | 問題数 | 割合 |
|--------|--------|------|
| ⭐ 初級 | 3 | 25% |
| ⭐⭐ 中級 | 6 | 50% |
| ⭐⭐⭐ 上級 | 3 | 25% |
```

## 実装の詳細

### Markdown の整形ルール

1. **見出しレベル**
   ```
   # ドキュメントタイトル
   ## セクション（分野名）
   ### 問題タイトル
   ```

2. **問題の標準フォーマット**
   ```markdown
   ### 問題 X: [タイトル]

   **難易度:** ⭐⭐ | **分野:** [分野名] | **出典:** YYYY-MM-DD

   [問題文]

   A) [選択肢A]
   B) [選択肢B]
   C) [選択肢C]
   D) [選択肢D]

   **正解:** X) [選択肢]

   **解説:**
   [詳細な解説]

   **学習ポイント:**
   - ポイント1
   - ポイント2
   ```

3. **コードブロック**
   ```markdown
   \`\`\`typescript
   // コード例
   const x: string = "hello";
   \`\`\`
   ```

4. **リスト・テーブル**
   - 順序付きリスト: `1. `
   - 順序なしリスト: `- `
   - テーブル: `| 列1 | 列2 |` 形式

### バリデーション

フォーマッタは以下を確認します：

- ✓ すべての問題に難易度が指定されているか
- ✓ すべての問題に分野が指定されているか
- ✓ 4択問題のすべてに解答があるか
- ✓ 記述問題に解答例があるか
- ✓ 見出しレベルが正しいか
- ✓ リンク（アンカー）が正しいか

## 出力ファイル構成

```
output/
└── quiz-2025-11-18.md          # メインファイル
    ├── ヘッダー・メタデータ
    ├── 目次（TOC）
    ├── 問題セクション（分野別）
    ├── 解答キー（表形式）
    ├── 統計情報
    └── 付録

archive/
└── quiz-2025-10-18.md          # 過去の問題セット
```

## 拡張予定

- [ ] HTML/CSS 出力フォーマット
- [ ] PDF 生成（pandoc 利用）
- [ ] 分野別・難易度別フィルタリング
- [ ] 正答率追跡機能
- [ ] Web ダッシュボード表示
