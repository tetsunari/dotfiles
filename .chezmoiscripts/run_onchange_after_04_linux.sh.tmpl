{{- if eq .chezmoi.os "linux" -}}
#!/bin/bash

set -ex

WINDOWS_HOME_DIR=$(wslpath $(/mnt/c/WINDOWS/system32/cmd.exe /c 'SET /P x=%USERPROFILE%<NUL' 2>/dev/null))

# WeZtermè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼ï¼ˆåˆ†å‰²ç®¡ç†å¯¾å¿œï¼‰
echo "ğŸ“¦ Copying WezTerm configuration..."

# ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
WEZTERM_SOURCE_FILE="{{ .chezmoi.sourceDir }}/dot_wezterm_linux.lua"
WEZTERM_DEST_FILE="$WINDOWS_HOME_DIR/.wezterm.lua"
cp "$WEZTERM_SOURCE_FILE" "$WEZTERM_DEST_FILE"
echo "âœ… Copied main WezTerm config: .wezterm.lua"

# åˆ†å‰²ãƒ•ã‚¡ã‚¤ãƒ«ä¸€å¼ï¼ˆ.config/wezterm/ï¼‰
WEZTERM_SOURCE_DIR="{{ .chezmoi.sourceDir }}/private_dot_config/wezterm"
WEZTERM_DEST_DIR="$WINDOWS_HOME_DIR/.config/wezterm"

if [ -d "$WEZTERM_SOURCE_DIR" ]; then
  mkdir -p "$WEZTERM_DEST_DIR"
  cp -r "$WEZTERM_SOURCE_DIR/"* "$WEZTERM_DEST_DIR/"
  echo "âœ… Copied WezTerm modules: .config/wezterm/"
else
  echo "âš ï¸  WezTerm modules directory not found, skipping"
fi

# WSLè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼
WSLCONFIG_SOURCE_FILE="{{ .chezmoi.sourceDir }}/dot_wslconfig"
WSLCONFIG_DEST_FILE="$WINDOWS_HOME_DIR/.wslconfig"
cp "$WSLCONFIG_SOURCE_FILE" "$WSLCONFIG_DEST_FILE"

# ãƒ•ã‚©ãƒ³ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°
fc-cache -fv

{{- end -}}
